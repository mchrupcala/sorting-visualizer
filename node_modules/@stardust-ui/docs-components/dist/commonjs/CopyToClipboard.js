"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.useCopyToClipboard = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var copyToClipboard = _interopRequireWildcard(require("copy-to-clipboard"));

var PropTypes = _interopRequireWildcard(require("prop-types"));

var React = _interopRequireWildcard(require("react"));

var useCopyToClipboard = function useCopyToClipboard(value) {
  var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3000;

  var _React$useState = React.useState(false),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      active = _React$useState2[0],
      setActive = _React$useState2[1];

  var onCopy = React.useCallback(function () {
    copyToClipboard(value);
    setActive(true);
    var timeoutId = setTimeout(function () {
      return setActive(false);
    }, timeout);
    return function () {
      return clearTimeout(timeoutId);
    };
  }, [timeout, value]);
  return [active, onCopy];
};

exports.useCopyToClipboard = useCopyToClipboard;

var CopyToClipboard = function CopyToClipboard(props) {
  var children = props.children,
      timeout = props.timeout,
      value = props.value;

  var _useCopyToClipboard = useCopyToClipboard(value, timeout),
      _useCopyToClipboard2 = (0, _slicedToArray2.default)(_useCopyToClipboard, 2),
      active = _useCopyToClipboard2[0],
      onCopy = _useCopyToClipboard2[1];

  return children(active, onCopy);
};

CopyToClipboard.propTypes = {
  children: PropTypes.func.isRequired,
  timeout: PropTypes.number,
  value: PropTypes.string.isRequired
};
var _default = CopyToClipboard;
exports.default = _default;